<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>퀴즐렛 플래시카드 클론 - 답보기 토글</title>
  <style>
    /* 기본 리셋 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f9fc;
      color: #333;
      line-height: 1.6;
    }
    header {
      background-color: #fff;
      border-bottom: 1px solid #e1e1e1;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .header-left {
      display: flex;
      align-items: center;
    }
    .header-left .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #222;
      margin-right: 10px;
    }
    #searchInput {
      padding: 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      background-color: #eee;
      color: #666;
    }
    header nav ul {
      list-style: none;
      display: flex;
      align-items: center;
    }
    header nav ul li {
      margin: 0 10px;
    }
    header nav ul li a,
    header nav ul li button {
      text-decoration: none;
      font-size: 1rem;
      padding: 5px 8px;
      border: none;
      background: none;
      cursor: pointer;
      transition: color 0.3s;
      color: #555;
    }
    header nav ul li a:hover,
    header nav ul li button:hover {
      color: #0076ff;
    }
    .container {
      max-width: 1000px;
      margin: 20px auto;
      padding: 0 20px;
    }
    .container h1 {
      margin-bottom: 20px;
      text-align: center;
      color: #0076ff;
    }
    /* --- 카드 애니메이션 및 직사각형 카드 스타일 --- */
    .flashcard {
      width: 350px;         /* 고정 가로 길이 */
      height: 150px;        /* 세로 크기 축소: 150px */
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      background-color: #fff;
      display: flex;
      flex-direction: column;
      perspective: 1000px;  /* 3D 애니메이션을 위한 원근감 */
    }
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flashcard.flipped .card-inner {
      transform: rotateY(180deg);
    }
    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
    }
    .front {
      background-color: #fff;
    }
    .back {
      background-color: #0076ff;
      color: #fff;
      transform: rotateY(180deg);
    }
    /* --- 새 카드 추가 폼 --- */
    #cardFormContainer {
      display: none;
      margin-bottom: 20px;
    }
    .flashcard-input {
      background: #fff;
      padding: 20px;
      border: 1px solid #e1e1e1;
      border-radius: 8px;
    }
    .flashcard-input h2 {
      margin-bottom: 10px;
      font-size: 1.2rem;
    }
    .flashcard-input form > div {
      margin-bottom: 10px;
    }
    .flashcard-input label {
      margin-right: 10px;
      font-weight: bold;
      vertical-align: middle;
    }
    /* 모든 텍스트 입력란 — 고정 가로 길이 400px */
    .input-field {
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 400px;
      vertical-align: middle;
      font-size: 1rem;
    }
    textarea.input-field {
      resize: vertical;
      height: 80px;
    }
    .flashcard-input button {
      cursor: pointer;
      padding: 10px 15px;
      background: #0076ff;
      color: #fff;
      border: none;
      border-radius: 4px;
      transition: background 0.3s;
      font-size: 1rem;
    }
    .flashcard-input button:hover {
      background: #005bb5;
    }
    /* --- 플래시카드 그리드 --- */
    .flashcards-grid {
      display: grid;
      grid-template-columns: repeat(3, 350px);  /* 3열 고정 */
      gap: 20px;
      justify-content: center;
    }
    /* 카드 앞면 내부 (헤더와 "답 보기" 버튼) */
    .card-header {
      padding: 10px;
      text-align: center;
    }
    .card-header .word-text {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .card-header button {
      margin: 5px 2px;
      padding: 5px 8px;
      background: #ffdc00;
      border: none;
      border-radius: 4px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .card-header .hint-content {
      margin-top: 5px;
      font-size: 0.9rem;
      color: #555;
    }
    /* 카드 뒷면 내부 (답 내용) */
    .card-content {
      padding: 10px;
      text-align: center;
    }
    .card-content .primary {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .card-content .detail {
      font-size: 1rem;
      line-height: 1.4;
    }
    /* --- 내 단어장 (학습 내용) 영역 --- */
    #myWordbookSection {
      display: none;
      width: 450px;
      margin: 20px auto;
      background: #fff;
      border: 1px solid #e1e1e1;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }
    #myWordbookSection h2 {
      margin-bottom: 10px;
      font-size: 1.2rem;
    }
    #studyContent {
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 400px;
      font-size: 1rem;
      resize: vertical;
      height: 120px;
    }
    #myWordbookSection button {
      margin-top: 10px;
      padding: 8px 12px;
      background: #0076ff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1rem;
    }
    #myWordbookSection button:hover {
      background: #005bb5;
    }
  </style>
</head>
<body>
  <!-- 헤더: 로고, 검색 입력, 네비게이션 (프로필 제거, 랜덤 정렬 삭제) -->
  <header>
    <div class="header-left">
      <div class="logo">Quizlet Clone</div>
      <input type="text" id="searchInput" placeholder="검색어 입력 (단어 기준 검색)">
    </div>
    <nav>
      <ul>
        <li><a href="#" id="homeLink">홈</a></li>
        <li><button id="toggleCardFormBtn">카드 추가</button></li>
        <li><a href="#" id="myWordbookLink">내 단어장</a></li>
      </ul>
    </nav>
  </header>
  
  <!-- 메인 컨텐츠 -->
  <div class="container">
    <h1>플래시카드 공부</h1>
    
    <!-- 카드 영역 -->
    <div id="flashcardsSection">
      <!-- 카드 추가 폼 (토글 가능) -->
      <div id="cardFormContainer">
        <div class="flashcard-input">
          <h2>새 카드 추가</h2>
          <form id="cardForm">
            <div>
              <label for="cardFront">단어:</label>
              <input type="text" id="cardFront" class="input-field" placeholder="단어 입력" required>
            </div>
            <div>
              <label for="cardBack">뜻:</label>
              <input type="text" id="cardBack" class="input-field" placeholder="뜻 입력" required>
            </div>
            <div>
              <label for="cardDetail">예문/상세:</label>
              <textarea id="cardDetail" class="input-field" placeholder="예문이나 추가 설명 입력"></textarea>
            </div>
            <div>
              <label for="cardHint">힌트:</label>
              <textarea id="cardHint" class="input-field" placeholder="힌트 입력 (선택)"></textarea>
            </div>
            <button type="submit">카드 추가</button>
          </form>
        </div>
      </div>
      
      <!-- 플래시카드 그리드 -->
      <div class="flashcards-grid" id="flashcardsGrid">
        <!-- 카드 DOM은 JavaScript를 통해 동적 생성 -->
      </div>
    </div>
    
    <!-- 내 단어장 (학습 내용) 영역 -->
    <div id="myWordbookSection">
      <h2>내 단어장</h2>
      <textarea id="studyContent" placeholder="학습한 내용을 입력하세요"></textarea>
      <br>
      <button id="saveStudyContentBtn">학습 내용 저장</button>
      <button id="loadStudyContentBtn">학습 내용 불러오기</button>
    </div>
  </div>
  
  <!-- JavaScript: 로컬스토리지, 카드 생성/렌더링, 검색, 네비게이션, 플립 애니메이션, 내 단어장 기능 -->
  <script>
    let flashcardsData = [];
    const defaultCards = [
      {
        word: "apple",
        meaning: "사과",
        detail: "사과는 영양가가 풍부하며 다양한 요리에 활용됩니다.",
        hint: "빨갛고 달콤한 과일"
      },
      {
        word: "banana",
        meaning: "바나나",
        detail: "바나나는 에너지원으로 운동 전후 섭취하기 좋습니다.",
        hint: "길고 노란 과일"
      },
      {
        word: "cherry",
        meaning: "체리",
        detail: "체리는 항산화 효과로 건강에 도움을 줍니다.",
        hint: "작고 붉은 과일"
      }
    ];
    
    const flashcardsGrid = document.getElementById("flashcardsGrid");
    const cardForm = document.getElementById("cardForm");
    const searchInput = document.getElementById("searchInput");
    const cardFormContainer = document.getElementById("cardFormContainer");
    const toggleCardFormBtn = document.getElementById("toggleCardFormBtn");
    const myWordbookLink = document.getElementById("myWordbookLink");
    const homeLink = document.getElementById("homeLink");
    const myWordbookSection = document.getElementById("myWordbookSection");
    const studyContentTextArea = document.getElementById("studyContent");
    const saveStudyContentBtn = document.getElementById("saveStudyContentBtn");
    const loadStudyContentBtn = document.getElementById("loadStudyContentBtn");
    
    function createCardElement(cardData, index) {
      const card = document.createElement("div");
      card.classList.add("flashcard");
      card.dataset.index = index;
      
      const cardInner = document.createElement("div");
      cardInner.classList.add("card-inner");
      
      // 앞면 (.front)
      const front = document.createElement("div");
      front.classList.add("front");
      
      const header = document.createElement("div");
      header.classList.add("card-header");
      
      const wordDiv = document.createElement("div");
      wordDiv.classList.add("word-text");
      wordDiv.textContent = cardData.word;
      header.appendChild(wordDiv);
      
      if (cardData.hint && cardData.hint.trim() !== "") {
        const hintBtn = document.createElement("button");
        hintBtn.classList.add("hint-btn");
        hintBtn.textContent = "힌트 보기";
        header.appendChild(hintBtn);
        
        const hintContent = document.createElement("div");
        hintContent.classList.add("hint-content");
        hintContent.style.display = "none";
        hintContent.textContent = cardData.hint;
        header.appendChild(hintContent);
        
        hintBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          if (hintContent.style.display === "none" || hintContent.style.display === "") {
            hintContent.style.display = "block";
            hintBtn.textContent = "힌트 숨기기";
          } else {
            hintContent.style.display = "none";
            hintBtn.textContent = "힌트 보기";
          }
        });
      }
      header.addEventListener("click", (e) => { e.stopPropagation(); });
      front.appendChild(header);
      
      // "답 보기" 버튼 → 이 버튼으로 카드 플립 (토글)
      const flipButton = document.createElement("button");
      flipButton.textContent = "답 보기";
      flipButton.style.display = "block";
      flipButton.style.margin = "20px auto";
      front.appendChild(flipButton);
      
      flipButton.addEventListener("click", (e) => {
        e.stopPropagation();
        card.classList.toggle("flipped");
        if(card.classList.contains("flipped")){
          flipButton.textContent = "답 숨기기";
        } else {
          flipButton.textContent = "답 보기";
        }
      });
      
      // 뒷면 (.back)
      const back = document.createElement("div");
      back.classList.add("back");
      
      const content = document.createElement("div");
      content.classList.add("card-content");
      
      const primaryDiv = document.createElement("div");
      primaryDiv.classList.add("primary");
      primaryDiv.textContent = cardData.meaning;
      content.appendChild(primaryDiv);
      
      if (cardData.detail && cardData.detail.trim() !== "") {
        const detailDiv = document.createElement("div");
        detailDiv.classList.add("detail");
        detailDiv.textContent = cardData.detail;
        content.appendChild(detailDiv);
      }
      back.appendChild(content);
      
      cardInner.appendChild(front);
      cardInner.appendChild(back);
      card.appendChild(cardInner);
      
      // 카드 영역의 빈 곳 클릭 시, 만약 카드가 flipped 상태이면 원래 상태로 되돌림.
      card.addEventListener("click", () => {
        if(card.classList.contains("flipped")){
          card.classList.remove("flipped");
          flipButton.textContent = "답 보기";
        }
      });
      
      return card;
    }
    
    function renderCards() {
      flashcardsGrid.innerHTML = "";
      flashcardsData.forEach((cardData, index) => {
        const cardElement = createCardElement(cardData, index);
        flashcardsGrid.appendChild(cardElement);
      });
    }
    
    function loadCardsFromStorage() {
      const stored = localStorage.getItem("flashcardsData");
      if (stored) {
        try {
          flashcardsData = JSON.parse(stored);
        } catch (e) {
          console.error("저장된 카드 데이터를 불러오는 중 오류 발생:", e);
          flashcardsData = defaultCards;
        }
      } else {
        flashcardsData = defaultCards;
      }
    }
    
    function saveCardsToStorage() {
      localStorage.setItem("flashcardsData", JSON.stringify(flashcardsData));
    }
    
    searchInput.addEventListener("input", () => {
      const query = searchInput.value.trim().toLowerCase();
      document.querySelectorAll(".flashcard").forEach(card => {
        const word = card.querySelector(".word-text").textContent.trim().toLowerCase();
        card.style.display = word.includes(query) ? "" : "none";
      });
    });
    
    cardForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const word = document.getElementById("cardFront").value.trim();
      const meaning = document.getElementById("cardBack").value.trim();
      const detail = document.getElementById("cardDetail").value.trim();
      const hint = document.getElementById("cardHint").value.trim();
      if (word && meaning) {
        const newCard = { word, meaning, detail, hint };
        flashcardsData.push(newCard);
        saveCardsToStorage();
        renderCards();
        cardForm.reset();
      }
    });
    
    toggleCardFormBtn.addEventListener("click", () => {
      if (cardFormContainer.style.display === "none" || cardFormContainer.style.display === "") {
        cardFormContainer.style.display = "block";
        toggleCardFormBtn.textContent = "폼 숨기기";
      } else {
        cardFormContainer.style.display = "none";
        toggleCardFormBtn.textContent = "카드 추가";
      }
    });
    
    saveStudyContentBtn.addEventListener("click", () => {
      const content = studyContentTextArea.value;
      localStorage.setItem("studyContent", content);
      alert("학습 내용이 저장되었습니다.");
    });
    
    loadStudyContentBtn.addEventListener("click", () => {
      const content = localStorage.getItem("studyContent");
      if (content) {
        studyContentTextArea.value = content;
        alert("저장된 학습 내용을 불러왔습니다.");
      } else {
        alert("저장된 학습 내용이 없습니다.");
      }
    });
    
    homeLink.addEventListener("click", (e) => {
      e.preventDefault();
      document.getElementById("flashcardsSection").style.display = "block";
      cardFormContainer.style.display = "none";
      myWordbookSection.style.display = "none";
    });
    
    myWordbookLink.addEventListener("click", (e) => {
      e.preventDefault();
      document.getElementById("flashcardsSection").style.display = "none";
      cardFormContainer.style.display = "none";
      myWordbookSection.style.display = "block";
    });
    
    loadCardsFromStorage();
    renderCards();
    document.getElementById("flashcardsSection").style.display = "block";
    myWordbookSection.style.display = "none";
    
    const savedStudyContent = localStorage.getItem("studyContent");
    if (savedStudyContent) {
      studyContentTextArea.value = savedStudyContent;
    }
  </script>
</body>
</html>